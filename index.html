<<!DOCTYPE html>
<html>
<head>
    <title>Memory Match Game</title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!--<script src="http://learning-fuze.github.io/memory_match/v0.1/script.js"></script>-->
</head>
<body>

<header><img src="images/Football Helmet Grey.png" height="256" width="256"/>
    NFL Team Logo Matching Game
    <ul id="headerLinks">
        <li><a href="#">Settings</a></li>
        <li><a href="about.html">About</a></li>
    </ul>
</header>

<div id="statsContainer">
    <div class="games-played">
        <p class="label">Games Played</p>
        <p class="value" id="games_played_value">2</p>
    </div>
    <div class="attempts">
        <p class="label">Attempts</p>
        <p class="value" id="attempts_value">2</p>
    </div>
    <div class="accuracy">
        <p class="label">Accuracy</p>
        <p class="value" id="accuracy_value">2</p>
    </div>

    <button class="reset">Reset Game</button>

    <div class='stats_image'>
        <img src="images/american-football-character-funny.png" height="178" width="178"/>
    </div>
</div>

<div id="game-area">
    <div class="card">
          <div class="front">
              <img src="images/dolphins.png"/></div>
          <div class="back">
              <img src="images/BackofCard.png"/></div>
      </div>

    <div class="card">
        <div class="front">
            <img src="images/packers.jpg" height="654" width="736"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

     <div class="card">
         <div class="front">
             <img src="images/panthers.jpg" height="600" width="800"/></div>
         <div class="back">
             <img src="images/BackofCard.png"/></div>
     </div>

    <div class="card">
        <div class="front">
            <img src="images/niners.jpg" height="177" width="284"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
        <div class="front">
            <img src="images/eagles.jpg" height="1200" width="1600"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
        <div class="front">
            <img src="images/dolphins.png"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

     <div class="card">
         <div class="front">
             <img src="images/patriots.jpg" height="354" width="236"/></div>
         <div class="back">
             <img src="images/BackofCard.png"/></div>
     </div>

     <div class="card">
         <div class="front">
             <img src="images/steelers.jpg" height="1200" width="1600"/></div>
         <div class="back">
             <img src="images/BackofCard.png"/></div>
     </div>

    <div class="card">
        <div class="front">
            <img src="images/titans.jpg"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
          <div class="front">
              <img src="images/titans.jpg"/></div>
          <div class="back">
              <img src="images/BackofCard.png"/></div>
    </div>

     <div class="card">
         <div class="front">
             <img src="images/eagles.jpg" height="1200" width="1600"/></div>
         <div class="back">
             <img src="images/BackofCard.png"/></div>
     </div>

    <div class="card">
        <div class="front">
            <img src="images/buccs.jpg" height="720" width="809"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
          <div class="front">
              <img src="images/panthers.jpg" height="600" width="800"/></div>
          <div class="back">
              <img src="images/BackofCard.png"/></div>
    </div>

     <div class="card">
         <div class="front">
             <img src="images/patriots.jpg" height="354" width="236"/></div>
         <div class="back">
             <img src="images/BackofCard.png"/></div>
     </div>

      <div class="card">
          <div class="front">
              <img src="images/steelers.jpg" height="1200" width="1600"/></div>
          <div class="back">
              <img src="images/BackofCard.png"/></div>
      </div>

    <div class="card">
        <div class="front">
            <img src="images/packers.jpg" height="654" width="736"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
        <div class="front">
            <img src="images/niners.jpg" height="177" width="284"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>

    <div class="card">
        <div class="front">
            <img src="images/buccs.jpg" height="720" width="809"/></div>
        <div class="back">
            <img src="images/BackofCard.png"/></div>
    </div>
</div>

<div class="youWin_img">
    <img src="images/success_baby.jpg" height="396" width="600"/>
</div>

<script>
    // scope instructions
    $(document).ready(initialize_game);
    function initialize_game() {
        $('.youWin_img').show();
        console.log('initialize_game called');
        $('.card').click(card_clicked);
        $('.reset').click(function(){
            games_played++;
            reset_stats();
            display_stats();
            $('.youWin_img').hide();
            first_card_clicked = null;
            second_card_clicked = null;
            return games_played;
        });
    }
    var first_card_clicked = null;
    var second_card_clicked = null;
    var total_possible_matches = 9;
    var match_counter = 0;
    var accept_click = true;
    var matches = 0;
    var attempts = 0;
    var accuracy = 0;
    var games_played = 0;

    function card_clicked() {
        if (accept_click) {
            console.log('card_clicked called', this);
            var back_element = $(this).find('.back');
            back_element.hide();
            if (first_card_clicked == null) {
                first_card_clicked = $(this);
                return;
            } else {
                second_card_clicked = $(this);
                attempts++;
                double_click_sameCard_fix();
            }
            if (first_card_clicked.find('.front img').attr('src') == second_card_clicked.find('.front img').attr('src')) {
                cards_matched();
                if (match_counter == total_possible_matches) {
                    all_cards_matched();
                } else {
                    return;
                }
            } else {
                accept_click = false;
                setTimeout(flip_back, 1200);
            }
        }
        display_stats();
    }
    function flip_back(){
        $(first_card_clicked).find('.back').show();
        $(second_card_clicked).find('.back').show();
        first_card_clicked = null;
        second_card_clicked = null;
        console.log('first and second card do not match');
        accept_click = true;

    }
    function cards_matched(){
        match_counter++;
        matches++;
        first_card_clicked = null;
        second_card_clicked = null;
        display_stats();
    }
    function all_cards_matched(){
        console.log('You win');
        //put you win message in document
        /*$('#game-area').addClass('game_over').text('Touchdown You Win!!');*/
        $('.card').hide();
        $('.youWin_img').show();
    }
    function double_click_sameCard_fix() {
        if (first_card_clicked[0] == second_card_clicked[0]) {
            second_card_clicked = null;
            return;
        }
    }
    function display_stats(){
        accuracy = parseInt(matches / attempts * 100) + "%";
        $('#games_played_value').text(games_played);
        $('#accuracy_value').text(accuracy);
        $('#attempts_value').text(attempts);
    }
    function reset_stats(){
        accuracy = 0;
        matches = 0;
        attempts = 0;
        match_counter = 0;
        display_stats();
    }
</script>


</body>
</html>
